import pandas as pd
import matplotlib.pyplot as plt

def perc_tot(serie_1, serie_2):
    return round((serie_1.sum() / serie_2.sum()) * 100, 2)

def analysis(choice):
    if (choice =="RT" or choice == "LM"):
        var = choice
    path = './docs/output_ids_' + var + '.csv'
    data = pd.read_csv(path, index_col= False)

    print("Analysis of ", choice, "\n")

    top = data['Following_ids'].value_counts()

    #Removing the first ID (which is RTFrance or LeMonde)
    # 3028247758 -> RTenfranÃ§ais
    # 24744541 -> LeMonde

    if (choice == "RT"):
        top = top.drop(labels=[3028247758]) 
    elif (choice == "LM"):
        top = top.drop(labels=[24744541]) 

    print("Sum : ", top.sum())

    n = 15
    top_n = top.head(n)

    print("Sum_n : ", top_n.sum())

    print("top ", n, " followers are taken into account")
    print("this represents ", perc_tot(top_n, top), " % of the followers")

    print("\nList of the studied followers : ")
    print(top_n, "\n")

    plt.pie(top_n, labels=top_n.index, rotatelabels=True, autopct= '%1.1f%%', pctdistance=0.8)
    plt.show()

    print('----------- Analysis complete ----------- \n \n')
    

analysis("LM")
analysis("RT")

